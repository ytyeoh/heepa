<!DOCTYPE html>
<html class="bg-white antialiased">
  {{- partial "head.html" . -}}
  <body>
    {{- block "main" . }}{{- end }}
    <main id="committee" class="w-full max-w-screen-xl mx-auto">
    <div class="px-6">
      <div
        id="content-wrapper"
        class="min-h-screen w-full  mx-auto"
      >
        <div id="content">
          <div class="flex">
            <div class="pb-16 w-full pt-12">
              <div class="">
          <div class="text-center p-10">
              <h1 class="font-bold text-4xl mb-4">{{ .Params.title }}</h1>
              <h1 class="text-3xl">{{ .Params.subtitle }}</h1>
          </div>
          
          

    <form class="max-w-sm mx-auto" id="form-ss"  enctype="multipart/form-data">
    	{{- partial "component/form.html" . -}}
    	<button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">加入</button>
      
    </form>


        <!-- 🛑 Grid Section - Ends Here -->
         </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  <script>
	$(document).ready(function() {
    $('#form-ss').submit(function(event) {
        // Prevent default form submission
        event.preventDefault();
        
        // Get form data
          const formData = new FormData(this);

        // Ajax request
        $.ajax({
            type: 'POST',
            url: 'https://mao.heepa.org/api/new_member',
            // url: 'http://localhost:8001/api/new_member',
            data: formData,
            processData: false, // ✅ don't process FormData
            contentType: false, // ✅ don't set content-type
            success: function(response) {
                // Handle success response
            	alert('请等待管理员批准');
                console.log('Form submitted successfully:', response);
                window.location.href = "/";
            },
            error: function(xhr, status, error) {
                // Handle error response

                console.error('Error submitting form:', error);
                alert('submi fail');
            }
        });
    });
});

</script>
   {{- partial "footer.html" . -}}
   
  </body>
</html>
